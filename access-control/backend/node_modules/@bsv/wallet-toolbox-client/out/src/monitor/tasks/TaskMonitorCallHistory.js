"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TaskMonitorCallHistory = void 0;
const Monitor_1 = require("../Monitor");
const WalletMonitorTask_1 = require("./WalletMonitorTask");
class TaskMonitorCallHistory extends WalletMonitorTask_1.WalletMonitorTask {
    constructor(monitor, triggerMsecs = Monitor_1.Monitor.oneMinute * 12) {
        super(monitor, TaskMonitorCallHistory.taskName);
        this.triggerMsecs = triggerMsecs;
    }
    trigger(nowMsecsSinceEpoch) {
        return {
            run: nowMsecsSinceEpoch > this.lastRunMsecsSinceEpoch + this.triggerMsecs
        };
    }
    async runTask() {
        const r = await this.monitor.services.getServicesCallHistory(true);
        const log = JSON.stringify(r);
        return log;
    }
}
exports.TaskMonitorCallHistory = TaskMonitorCallHistory;
TaskMonitorCallHistory.taskName = 'MonitorCallHistory';
//# sourceMappingURL=TaskMonitorCallHistory.js.map